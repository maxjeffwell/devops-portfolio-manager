# Google Secret Manager SecretStore
# Prerequisites:
# 1. Create GCP service account with Secret Manager access
# 2. Create Kubernetes secret with service account key:
#    kubectl create secret generic gcp-credentials \
#      --from-file=credentials.json=./path/to/service-account-key.json \
#      -n default
# 3. Store secrets in Google Secret Manager with names like:
#    - portfolio-bookmarked-database-url
#    - portfolio-bookmarked-jwt-secret
#    - portfolio-code-talk-database-url
#    etc.

apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: gcp-secretstore
  namespace: default
spec:
  provider:
    gcpsm:
      projectID: "your-gcp-project-id"
      auth:
        secretRef:
          secretAccessKeySecretRef:
            name: gcp-credentials
            key: credentials.json

---
# Alternative: Use Workload Identity (No credentials needed in cluster)
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: gcp-secretstore-wi
  namespace: default
spec:
  provider:
    gcpsm:
      projectID: "your-gcp-project-id"
      auth:
        workloadIdentity:
          clusterLocation: "us-central1"
          clusterName: "my-cluster"
          serviceAccountRef:
            name: external-secrets-sa
