---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: ai-gateway-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: ai-gateway-credentials
    creationPolicy: Owner
  data:
    - secretKey: ANTHROPIC_API_KEY
      remoteRef:
        key: ANTHROPIC_API_KEY
    - secretKey: GROQ_API_KEY
      remoteRef:
        key: GROQ_API_KEY
    - secretKey: RUNPOD_API_KEY
      remoteRef:
        key: RUNPOD_API_KEY
    - secretKey: RUNPOD_ENDPOINT_ID
      remoteRef:
        key: RUNPOD_ENDPOINT_ID
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: anthropic-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: anthropic-credentials
    creationPolicy: Owner
  data:
    - secretKey: api-key
      remoteRef:
        key: ANTHROPIC_API_KEY
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: argocd-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: argocd-credentials
    creationPolicy: Owner
  data:
    - secretKey: username
      remoteRef:
        key: ARGOCD_ADMIN_USERNAME
    - secretKey: password
      remoteRef:
        key: ARGOCD_ADMIN_PASSWORD
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: backblaze-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: backblaze-b2-creds
    creationPolicy: Owner
  data:
    - secretKey: accessKeyID
      remoteRef:
        key: BACKBLAZE_ACCESS_KEY_ID
    - secretKey: secretAccessKey
      remoteRef:
        key: BACKBLAZE_SECRET_ACCESS_KEY
    - secretKey: bucket
      remoteRef:
        key: BACKBLAZE_BUCKET
    - secretKey: endpoint
      remoteRef:
        key: BACKBLAZE_ENDPOINT
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: bookmarked-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: bookmarked-secret
    creationPolicy: Owner
  data:
    - secretKey: DATABASE_URL
      remoteRef:
        key: BOOKMARKED_DATABASE_URL
    - secretKey: OPENAI_API_KEY
      remoteRef:
        key: BOOKMARKED_OPENAI_API_KEY
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: cloudflared-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: cloudflared-ai-gateway
    creationPolicy: Owner
  data:
    - secretKey: token
      remoteRef:
        key: CLOUDFLARED_TOKEN
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: code-talk-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: code-talk-secret
    creationPolicy: Owner
  data:
    - secretKey: DATABASE_URL
      remoteRef:
        key: CODE_TALK_DATABASE_URL
    - secretKey: JWT_SECRET
      remoteRef:
        key: CODE_TALK_JWT_SECRET
    - secretKey: REDIS_URL
      remoteRef:
        key: CODE_TALK_REDIS_URL
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: devops-portfolio-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: devops-portfolio-secrets
    creationPolicy: Owner
  data:
    - secretKey: auth-database-url
      remoteRef:
        key: NEON_DATABASE_URL
    - secretKey: github-token
      remoteRef:
        key: GITHUB_TOKEN
    - secretKey: jwt-secret
      remoteRef:
        key: PORTFOLIO_JWT_SECRET
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: educationelly-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: educationelly-secret
    creationPolicy: Owner
  data:
    - secretKey: MONGODB_URI
      remoteRef:
        key: EDUCATIONELLY_MONGODB_URI
    - secretKey: JWT_SECRET
      remoteRef:
        key: EDUCATIONELLY_JWT_SECRET
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: educationelly-graphql-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: educationelly-graphql-secret
    creationPolicy: Owner
  data:
    - secretKey: MONGODB_URI
      remoteRef:
        key: EDUCATIONELLY_GRAPHQL_MONGODB_URI
    - secretKey: JWT_SECRET
      remoteRef:
        key: EDUCATIONELLY_GRAPHQL_JWT_SECRET
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: groq-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: groq-credentials
    creationPolicy: Owner
  data:
    - secretKey: api-key
      remoteRef:
        key: GROQ_API_KEY
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: intervalai-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: intervalai-secret
    creationPolicy: Owner
  data:
    - secretKey: MONGODB_URI
      remoteRef:
        key: INTERVALAI_MONGODB_URI
    - secretKey: JWT_SECRET
      remoteRef:
        key: INTERVALAI_JWT_SECRET
    - secretKey: RUNPOD_API_KEY
      remoteRef:
        key: RUNPOD_API_KEY
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: langfuse-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: langfuse-credentials
    creationPolicy: Owner
  data:
    - secretKey: LANGFUSE_PUBLIC_KEY
      remoteRef:
        key: LANGFUSE_PUBLIC_KEY
    - secretKey: LANGFUSE_SECRET_KEY
      remoteRef:
        key: LANGFUSE_SECRET_KEY
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: mongodb-educationelly-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: mongodb-educationelly-secrets
    creationPolicy: Owner
  data:
    - secretKey: mongodb-root-password
      remoteRef:
        key: MONGODB_EDUCATIONELLY_ROOT_PASSWORD
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: mongodb-educationelly-graphql-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: mongodb-educationelly-graphql-secrets
    creationPolicy: Owner
  data:
    - secretKey: mongodb-root-password
      remoteRef:
        key: MONGODB_EDUCATIONELLY_GRAPHQL_ROOT_PASSWORD
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: mongodb-intervalai-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: mongodb-intervalai-secrets
    creationPolicy: Owner
  data:
    - secretKey: mongodb-root-password
      remoteRef:
        key: MONGODB_INTERVALAI_ROOT_PASSWORD
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: portfolio-api-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: portfolio-api-secrets
    creationPolicy: Owner
  data:
    - secretKey: admin-username
      remoteRef:
        key: PORTFOLIO_ADMIN_USERNAME
    - secretKey: admin-password
      remoteRef:
        key: PORTFOLIO_ADMIN_PASSWORD
    - secretKey: jwt-secret
      remoteRef:
        key: PORTFOLIO_JWT_SECRET
    - secretKey: gotify-app-token
      remoteRef:
        key: GOTIFY_APP_TOKEN
    - secretKey: gotify-client-token
      remoteRef:
        key: GOTIFY_CLIENT_TOKEN
    - secretKey: auth-database-url
      remoteRef:
        key: NEON_DATABASE_URL
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: portfolio-db-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: portfolio-db-secret
    creationPolicy: Owner
  data:
    - secretKey: DATABASE_URL
      remoteRef:
        key: NEON_DATABASE_URL
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: postgresql-codetalk-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: postgresql-codetalk-secrets
    creationPolicy: Owner
  data:
    - secretKey: postgres-password
      remoteRef:
        key: POSTGRESQL_CODETALK_PASSWORD
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: redis-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: redis-secrets
    creationPolicy: Owner
  data:
    - secretKey: redis-password
      remoteRef:
        key: REDIS_PASSWORD
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: runpod-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: runpod-credentials
    creationPolicy: Owner
  data:
    - secretKey: api-key
      remoteRef:
        key: RUNPOD_API_KEY
    - secretKey: endpoint-id
      remoteRef:
        key: RUNPOD_ENDPOINT_ID
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: vertex-platform-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: vertex-platform-secret
    creationPolicy: Owner
  data:
    - secretKey: jwt-secret
      remoteRef:
        key: VERTEX_JWT_SECRET
    - secretKey: kafka-brokers
      remoteRef:
        key: KAFKA_BROKERS
    - secretKey: kafka-username
      remoteRef:
        key: KAFKA_USERNAME
    - secretKey: kafka-password
      remoteRef:
        key: KAFKA_PASSWORD
    - secretKey: influxdb-token
      remoteRef:
        key: INFLUXDB_TOKEN
    - secretKey: auth-database-url
      remoteRef:
        key: NEON_DATABASE_URL
---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: langfuse-postgresql-external-secret
  namespace: langfuse
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: langfuse-postgresql
    creationPolicy: Owner
  data:
    - secretKey: postgres-password
      remoteRef:
        key: NEONDB_PASSWORD
---
# CSI S3 (GeeseFS) - B2 credentials for PVC storage
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: csi-s3-external-secret
  namespace: kube-system
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: csi-s3-secret
    creationPolicy: Owner
  data:
    - secretKey: accessKeyID
      remoteRef:
        key: BACKBLAZE_ACCESS_KEY_ID
    - secretKey: secretAccessKey
      remoteRef:
        key: BACKBLAZE_SECRET_ACCESS_KEY
    - secretKey: endpoint
      remoteRef:
        key: BACKBLAZE_ENDPOINT
---
# Velero - B2 credentials for cluster backups
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: velero-cloud-credentials-external-secret
  namespace: velero
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: cloud-credentials
    creationPolicy: Owner
    template:
      data:
        cloud: |
          [default]
          aws_access_key_id={{ .accessKeyID }}
          aws_secret_access_key={{ .secretAccessKey }}
  data:
    - secretKey: accessKeyID
      remoteRef:
        key: BACKBLAZE_ACCESS_KEY_ID
    - secretKey: secretAccessKey
      remoteRef:
        key: BACKBLAZE_SECRET_ACCESS_KEY
---
# Velero repo credentials
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: velero-repo-credentials-external-secret
  namespace: velero
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: velero-repo-credentials
    creationPolicy: Owner
  data:
    - secretKey: repository-password
      remoteRef:
        key: VELERO_REPO_PASSWORD
---
# Keel - Gotify notification credentials
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: keel-external-secret
  namespace: keel
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: keel
    creationPolicy: Owner
  data:
    - secretKey: GOTIFY_TOKEN
      remoteRef:
        key: KEEL_GOTIFY_TOKEN
    - secretKey: GOTIFY_URL
      remoteRef:
        key: KEEL_GOTIFY_URL
    - secretKey: KEEL_NOTIFICATION_GOTIFY_ADDRESS
      remoteRef:
        key: KEEL_NOTIFICATION_GOTIFY_ADDRESS
    - secretKey: KEEL_NOTIFICATION_GOTIFY_TOKEN
      remoteRef:
        key: KEEL_GOTIFY_TOKEN
    - secretKey: WEBHOOK_ENDPOINT
      remoteRef:
        key: KEEL_WEBHOOK_ENDPOINT
---
# DockerHub credentials for image pulls
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: dockerhub-external-secret
  namespace: default
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: dockerhub-credentials
    creationPolicy: Owner
    template:
      type: kubernetes.io/dockerconfigjson
      data:
        .dockerconfigjson: |
          {"auths":{"https://index.docker.io/v1/":{"username":"{{ .username }}","password":"{{ .password }}","auth":"{{ printf "%s:%s" .username .password | b64enc }}"}}}
  data:
    - secretKey: username
      remoteRef:
        key: DOCKERHUB_USERNAME
    - secretKey: password
      remoteRef:
        key: DOCKERHUB_PASSWORD
---
# Educationelly namespace secrets
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: educationelly-ns-external-secret
  namespace: educationelly
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: educationelly-secrets
    creationPolicy: Owner
  data:
    - secretKey: jwt-secret
      remoteRef:
        key: EDUCATIONELLY_NS_JWT_SECRET
    - secretKey: mongodb-uri
      remoteRef:
        key: EDUCATIONELLY_NS_MONGODB_URI
---
# Langfuse ClickHouse credentials
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: langfuse-clickhouse-external-secret
  namespace: langfuse
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: langfuse-clickhouse
    creationPolicy: Owner
  data:
    - secretKey: admin-password
      remoteRef:
        key: LANGFUSE_CLICKHOUSE_PASSWORD
---
# Langfuse NextAuth credentials
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: langfuse-nextauth-external-secret
  namespace: langfuse
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: langfuse-nextauth
    creationPolicy: Owner
  data:
    - secretKey: nextauth-secret
      remoteRef:
        key: LANGFUSE_NEXTAUTH_SECRET
---
# Langfuse S3/MinIO credentials
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: langfuse-s3-external-secret
  namespace: langfuse
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: langfuse-s3
    creationPolicy: Owner
  data:
    - secretKey: root-user
      remoteRef:
        key: LANGFUSE_S3_ROOT_USER
    - secretKey: root-password
      remoteRef:
        key: LANGFUSE_S3_ROOT_PASSWORD
---
# Microservices MongoDB credentials
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: microservices-mongodb-external-secret
  namespace: microservices
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: mongodb
    creationPolicy: Owner
  data:
    - secretKey: mongodb-root-password
      remoteRef:
        key: MICROSERVICES_MONGODB_ROOT_PASSWORD
    - secretKey: mongodb-passwords
      remoteRef:
        key: MICROSERVICES_MONGODB_ROOT_PASSWORD
---
# Microservices Redis credentials
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: microservices-redis-external-secret
  namespace: microservices
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: redis
    creationPolicy: Owner
  data:
    - secretKey: redis-password
      remoteRef:
        key: MICROSERVICES_REDIS_PASSWORD
---
# Vertex Platform secrets
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: vertex-platform-secrets-external-secret
  namespace: vertex-platform
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: platform-secrets
    creationPolicy: Owner
  data:
    - secretKey: JWT_SECRET
      remoteRef:
        key: VERTEX_JWT_SECRET
    - secretKey: INFLUXDB_TOKEN
      remoteRef:
        key: INFLUXDB_TOKEN
    - secretKey: INFLUXDB_USERNAME
      remoteRef:
        key: VERTEX_INFLUXDB_USERNAME
    - secretKey: INFLUXDB_PASSWORD
      remoteRef:
        key: VERTEX_INFLUXDB_PASSWORD
    - secretKey: MONGO_USERNAME
      remoteRef:
        key: VERTEX_MONGO_USERNAME
    - secretKey: MONGO_PASSWORD
      remoteRef:
        key: VERTEX_MONGO_PASSWORD
    - secretKey: REDIS_PASSWORD
      remoteRef:
        key: VERTEX_REDIS_PASSWORD
    - secretKey: AUTH_DATABASE_URL
      remoteRef:
        key: NEON_DATABASE_URL
    - secretKey: USER_DATABASE_URL
      remoteRef:
        key: NEON_DATABASE_URL
---
# Grafana admin credentials
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: prometheus-grafana-external-secret
  namespace: monitoring
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: doppler-secret-store
    kind: ClusterSecretStore
  target:
    name: prometheus-grafana
    creationPolicy: Owner
  data:
    - secretKey: admin-user
      remoteRef:
        key: GRAFANA_ADMIN_USER
    - secretKey: admin-password
      remoteRef:
        key: GRAFANA_ADMIN_PASSWORD
